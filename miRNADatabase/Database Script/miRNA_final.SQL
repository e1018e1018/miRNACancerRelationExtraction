USE Master
GO
CREATE DATABASE [miRNA_final_v2]
GO
USE [miRNA_final_v2]
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ARTICLE]') AND type in (N'U'))
    DROP TABLE [dbo].[ARTICLE]
GO
CREATE TABLE [dbo].[ARTICLE] (
[ART_ID] INTEGER  NOT NULL  
, [ART_PMID] INTEGER  NOT NULL  
)
GO

ALTER TABLE [dbo].[ARTICLE] ADD CONSTRAINT [ARTICLE_PK] PRIMARY KEY CLUSTERED (
[ART_PMID]
)
GO
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[SENTENCE]') AND type in (N'U'))
    DROP TABLE [dbo].[SENTENCE]
GO
CREATE TABLE [dbo].[SENTENCE] (
[SENT_ID] INTEGER  NOT NULL  
, [ART_PMID] INTEGER  NOT NULL  
, [IS_TITLE] BIT  NOT NULL  
, [TEXT] TEXT  NOT NULL  
)
GO

ALTER TABLE [dbo].[SENTENCE] ADD CONSTRAINT [SENTENCE_PK] PRIMARY KEY CLUSTERED (
[SENT_ID]
, [ART_PMID]
)
GO
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ANNOTATION]') AND type in (N'U'))
    DROP TABLE [dbo].[ANNOTATION]
GO
CREATE TABLE [dbo].[ANNOTATION] (
[ANN_ID] CHAR(20)  NOT NULL  
, [SENT_ID] INTEGER  NULL  
, [TYPE] TEXT  NULL  
, [ART_PMID] INTEGER  NULL  
)
GO

ALTER TABLE [dbo].[ANNOTATION] ADD CONSTRAINT [ANNOTATION_PK] PRIMARY KEY CLUSTERED (
[ANN_ID]
)
GO
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ENTITY]') AND type in (N'U'))
    DROP TABLE [dbo].[ENTITY]
GO
CREATE TABLE [dbo].[ENTITY] (
[ANN_ID] CHAR(20)  NOT NULL  
, [TEXT] TEXT  NOT NULL  
, [FIRST_LETTER_NUM] INTEGER  NOT NULL  
, [LAST_LETTER_NUM] INTEGER  NOT NULL  
)
GO

ALTER TABLE [dbo].[ENTITY] ADD CONSTRAINT [ENTITY_PK] PRIMARY KEY CLUSTERED (
[ANN_ID]
)
GO
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[PAIR]') AND type in (N'U'))
    DROP TABLE [dbo].[PAIR]
GO
CREATE TABLE [dbo].[PAIR] (
[ANN_ID] CHAR(20)  NOT NULL  
, [E1] CHAR(20)  NOT NULL  
, [E2] CHAR(20)  NOT NULL  
, [INTERACTION] BIT  NOT NULL  
)
GO

ALTER TABLE [dbo].[PAIR] ADD CONSTRAINT [PAIR_PK] PRIMARY KEY CLUSTERED (
[ANN_ID]
, [E1]
, [E2]
)
GO
GO

GO

ALTER TABLE [dbo].[SENTENCE] WITH CHECK ADD CONSTRAINT [ARTICLE_SENTENCE_FK1] FOREIGN KEY (
[ART_PMID]
)
REFERENCES [dbo].[ARTICLE] (
[ART_PMID]
)
GO

ALTER TABLE [dbo].[ANNOTATION] WITH CHECK ADD CONSTRAINT [SENTENCE_ANNOTATION_FK1] FOREIGN KEY (
[SENT_ID]
, [ART_PMID]
)
REFERENCES [dbo].[SENTENCE] (
[SENT_ID]
, [ART_PMID]
)
GO

ALTER TABLE [dbo].[ENTITY] WITH CHECK ADD CONSTRAINT [ANNOTATION_ENTITY_FK1] FOREIGN KEY (
[ANN_ID]
)
REFERENCES [dbo].[ANNOTATION] (
[ANN_ID]
)
GO

ALTER TABLE [dbo].[PAIR] WITH CHECK ADD CONSTRAINT [ANNOTATION_PAIR_FK1] FOREIGN KEY (
[ANN_ID]
)
REFERENCES [dbo].[ANNOTATION] (
[ANN_ID]
)
ALTER TABLE [dbo].[PAIR] WITH CHECK ADD CONSTRAINT [ENTITY_PAIR_FK2] FOREIGN KEY (
[E2]
)
REFERENCES [dbo].[ENTITY] (
[ANN_ID]
)
ALTER TABLE [dbo].[PAIR] WITH CHECK ADD CONSTRAINT [ENTITY_PAIR_FK1] FOREIGN KEY (
[E1]
)
REFERENCES [dbo].[ENTITY] (
[ANN_ID]
)
GO

